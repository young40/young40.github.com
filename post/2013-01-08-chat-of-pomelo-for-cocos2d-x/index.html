<!DOCTYPE html>
<html lang="zh-cn">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=8077&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>基于Pomelo和Cocos2d-x的聊天室 - 杨世玲的博客</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="" /><meta name="description" content="据说聊天室和游戏系统有很多相似之处, 并且很多游戏本身就带着多人聊天系统. 所以Pomelo将聊天室作为了一个例子.
开源是非常棒的思想和运动, 我简单提两点体会, 1.发现了问题可以不用等官方响应,自己有能力就可以马上修复. 2.你可以贡献自己的代码,很多人都可以贡献代码,可以让项目快速发展. 当然一旦你的代码被接受并被很多人使用, 心中的成就感是不言而喻的.
之所以要提到开源, 是因为今天我们要用到的东西基本上全部是开源的, 并且我们还要对其中的代码做一些修改才能正常工作. 再一次为开源鼓掌!
这并不是一篇Pomelo,或者Cocos2d-x的入门说明, 需要你对这两者都有一定的了解. 同时, 无论是Pomelo还是Cocos2d-x, 我都是新手, 如果文章中有错误的地方, 希望您能不吝指出. 您可以在文章下面留言, 或者在新浪微博上发微薄 @杨世玲 (需要说明的一点是, 请勿私信提问非隐私性技术问题, 我是希望您的问题, 我的或者其他朋友的回复,能被更多朋友搜索到, 我希望我们的交流, 能让更多朋友受到启发, 受益. 这也是对社区和世界和平的一点贡献吧.)
" /><meta name="keywords" content="gamedev, cocos, unity, game, unreal" />






<meta name="generator" content="Hugo 0.147.0 with theme even" />


<link rel="canonical" href="http://localhost:8077/post/2013-01-08-chat-of-pomelo-for-cocos2d-x/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:url" content="http://localhost:8077/post/2013-01-08-chat-of-pomelo-for-cocos2d-x/">
  <meta property="og:site_name" content="杨世玲的博客">
  <meta property="og:title" content="基于Pomelo和Cocos2d-x的聊天室">
  <meta property="og:description" content="据说聊天室和游戏系统有很多相似之处, 并且很多游戏本身就带着多人聊天系统. 所以Pomelo将聊天室作为了一个例子.
开源是非常棒的思想和运动, 我简单提两点体会, 1.发现了问题可以不用等官方响应,自己有能力就可以马上修复. 2.你可以贡献自己的代码,很多人都可以贡献代码,可以让项目快速发展. 当然一旦你的代码被接受并被很多人使用, 心中的成就感是不言而喻的.
之所以要提到开源, 是因为今天我们要用到的东西基本上全部是开源的, 并且我们还要对其中的代码做一些修改才能正常工作. 再一次为开源鼓掌!
这并不是一篇Pomelo,或者Cocos2d-x的入门说明, 需要你对这两者都有一定的了解. 同时, 无论是Pomelo还是Cocos2d-x, 我都是新手, 如果文章中有错误的地方, 希望您能不吝指出. 您可以在文章下面留言, 或者在新浪微博上发微薄 @杨世玲 (需要说明的一点是, 请勿私信提问非隐私性技术问题, 我是希望您的问题, 我的或者其他朋友的回复,能被更多朋友搜索到, 我希望我们的交流, 能让更多朋友受到启发, 受益. 这也是对社区和世界和平的一点贡献吧.)">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="post">
    <meta property="article:published_time" content="2013-01-08T00:39:00+08:00">
    <meta property="article:modified_time" content="2013-01-08T00:39:00+08:00">

  <meta itemprop="name" content="基于Pomelo和Cocos2d-x的聊天室">
  <meta itemprop="description" content="据说聊天室和游戏系统有很多相似之处, 并且很多游戏本身就带着多人聊天系统. 所以Pomelo将聊天室作为了一个例子.
开源是非常棒的思想和运动, 我简单提两点体会, 1.发现了问题可以不用等官方响应,自己有能力就可以马上修复. 2.你可以贡献自己的代码,很多人都可以贡献代码,可以让项目快速发展. 当然一旦你的代码被接受并被很多人使用, 心中的成就感是不言而喻的.
之所以要提到开源, 是因为今天我们要用到的东西基本上全部是开源的, 并且我们还要对其中的代码做一些修改才能正常工作. 再一次为开源鼓掌!
这并不是一篇Pomelo,或者Cocos2d-x的入门说明, 需要你对这两者都有一定的了解. 同时, 无论是Pomelo还是Cocos2d-x, 我都是新手, 如果文章中有错误的地方, 希望您能不吝指出. 您可以在文章下面留言, 或者在新浪微博上发微薄 @杨世玲 (需要说明的一点是, 请勿私信提问非隐私性技术问题, 我是希望您的问题, 我的或者其他朋友的回复,能被更多朋友搜索到, 我希望我们的交流, 能让更多朋友受到启发, 受益. 这也是对社区和世界和平的一点贡献吧.)">
  <meta itemprop="datePublished" content="2013-01-08T00:39:00+08:00">
  <meta itemprop="dateModified" content="2013-01-08T00:39:00+08:00">
  <meta itemprop="wordCount" content="2389">
  <meta itemprop="keywords" content="Cocos2d-X">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="基于Pomelo和Cocos2d-x的聊天室">
  <meta name="twitter:description" content="据说聊天室和游戏系统有很多相似之处, 并且很多游戏本身就带着多人聊天系统. 所以Pomelo将聊天室作为了一个例子.
开源是非常棒的思想和运动, 我简单提两点体会, 1.发现了问题可以不用等官方响应,自己有能力就可以马上修复. 2.你可以贡献自己的代码,很多人都可以贡献代码,可以让项目快速发展. 当然一旦你的代码被接受并被很多人使用, 心中的成就感是不言而喻的.
之所以要提到开源, 是因为今天我们要用到的东西基本上全部是开源的, 并且我们还要对其中的代码做一些修改才能正常工作. 再一次为开源鼓掌!
这并不是一篇Pomelo,或者Cocos2d-x的入门说明, 需要你对这两者都有一定的了解. 同时, 无论是Pomelo还是Cocos2d-x, 我都是新手, 如果文章中有错误的地方, 希望您能不吝指出. 您可以在文章下面留言, 或者在新浪微博上发微薄 @杨世玲 (需要说明的一点是, 请勿私信提问非隐私性技术问题, 我是希望您的问题, 我的或者其他朋友的回复,能被更多朋友搜索到, 我希望我们的交流, 能让更多朋友受到启发, 受益. 这也是对社区和世界和平的一点贡献吧.)">

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

<script>
  MathJax = {
    tex: {
	inlineMath: [["$", "$"]]
    },
    displayMath: [
      ["$$", "$$"],
      
    ],
    svg: {
      fontCache: "global",
    },
  };
</script>

<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">杨世玲的博客</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">分类</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">杨世玲的博客</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">分类</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">基于Pomelo和Cocos2d-x的聊天室</h1>

      <div class="post-meta">
        <span class="post-time"> 2013-01-08 </span>
        <div class="post-category">
            <a href="/categories/cocos2d-x/"> Cocos2d-x </a>
            </div>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">文章目录</h2>
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li>
          <ul>
            <li><a href="#环境配置">环境配置</a></li>
            <li><a href="#项目配置">项目配置</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p>据说聊天室和游戏系统有很多相似之处, 并且很多游戏本身就带着多人聊天系统. 所以Pomelo将聊天室作为了一个例子.</p>
<p>开源是非常棒的思想和运动, 我简单提两点体会,
1.发现了问题可以不用等官方响应,自己有能力就可以马上修复. 2.你可以贡献自己的代码,很多人都可以贡献代码,可以让项目快速发展.
当然一旦你的代码被接受并被很多人使用, 心中的成就感是不言而喻的.</p>
<p>之所以要提到开源, 是因为今天我们要用到的东西基本上全部是开源的, 并且我们还要对其中的代码做一些修改才能正常工作. 再一次为开源鼓掌!</p>
<p>这并不是一篇Pomelo,或者Cocos2d-x的入门说明, 需要你对这两者都有一定的了解.
同时, 无论是Pomelo还是Cocos2d-x, 我都是新手, 如果文章中有错误的地方, 希望您能不吝指出.
您可以在文章下面留言, 或者在新浪微博上发微薄 @杨世玲
(需要说明的一点是, 请勿私信提问非隐私性技术问题, 我是希望您的问题, 我的或者其他朋友的回复,能被更多朋友搜索到,
我希望我们的交流, 能让更多朋友受到启发, 受益. 这也是对社区和世界和平的一点贡献吧.)</p>
<p>下面是我们需要使用到的工具及其版本:</p>
<ul>
<li>平台:OS X(10.8.2) Xcode(4.5.2)</li>
<li>Cocos2d-2.1beta3-x-2.1.0</li>
<li>Pomelo <a href="https://github.com/NetEase/pomelo">https://github.com/NetEase/pomelo</a></li>
<li>socket.io-clientpp <a href="https://github.com/ebshimizu/socket.io-clientpp">https://github.com/ebshimizu/socket.io-clientpp</a></li>
<li>websocketpp <a href="https://github.com/zaphoyd/websocketpp">https://github.com/zaphoyd/websocketpp</a></li>
<li>Rapidjson <a href="https://code.google.com/p/rapidjson/">https://code.google.com/p/rapidjson/</a></li>
<li>chatofpomelo <a href="https://github.com/NetEase/chatofpomelo">https://github.com/NetEase/chatofpomelo</a></li>
</ul>
<p>查阅本文时请注意版本差异.</p>
<h3 id="环境配置">环境配置</h3>
<p>我们的目标是实现OS X, IOS, Android三个平台下的chatofpomelo的Cocos2d-x版本.<br>
所以需要安装各自平台的开发工具如Xcode,Eclipse,NDK等, 不是本文需要关心的内容. 相信大家也已经轻车熟路了.<br>
Pomelo的安装 <code>npm install pomelo -g</code>, 如有疑问请查看Pomelo的Wiki.<br>
websocketpp需要著名的C++库, boost. 我是使用了HomeBrew来安装.
其他安装方式请自省查阅相关文档, 有一点需要指出的是, 必须编译为带有x86(i386)支持lib文件.
因为Cocos2d-x在OS X下是32位的.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">brew install boost --universal
</span></span></code></pre></td></tr></table>
</div>
</div><p>上面这条命令中<code>--universal</code>即代表编译出来的boost的lib文件同时支持x86和x64.</p>
<h3 id="项目配置">项目配置</h3>
<p>Cocos2d-x跨平台无疑做的很好, 但是如果手动创建一个结构良好的跨平台项目,还是一件非常棘手的事.<br>
幸好我们可以偷懒, 打开Cocos2d-x的源代码, samples目录下面都是已经配置好的跨平台的项目文件.
合理利用, 将事半功倍.</p>
<p>我们将samples目录下HelloCpp复制为ChatOfPomelo,打开找到proj.mac目录下面的<code>HelloCpp.xcodeproj</code>,
可以将其重命名为<code>ChatOfPomelo-Mac.xcodeproj</code>, 以便于和接下来的ios项目有所区分.</p>
<p>在ChatOfPomelo下创建lib目录, 下载socket.io-clientpp和websocketpp并解压到lib目录下面.
并将socket.io-clientpp/lib/rapidjson 复制到lib目录下面. <br>
目录结构应该是这样的.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">ChatOfPomelo/
</span></span><span class="line"><span class="cl">├── Classes
</span></span><span class="line"><span class="cl">├── Resources
</span></span><span class="line"><span class="cl">├── lib
</span></span><span class="line"><span class="cl">│   ├── rapidjson
</span></span><span class="line"><span class="cl">│   ├── socket.io-clientpp
</span></span><span class="line"><span class="cl">│   └── websocketpp
</span></span><span class="line"><span class="cl">├── proj.android
</span></span><span class="line"><span class="cl">├── proj.blackberry
</span></span><span class="line"><span class="cl">├── proj.ios
</span></span><span class="line"><span class="cl">├── proj.linux
</span></span><span class="line"><span class="cl">├── proj.mac
</span></span><span class="line"><span class="cl">├── proj.marmalade
</span></span><span class="line"><span class="cl">└── proj.win32
</span></span></code></pre></td></tr></table>
</div>
</div><p>我们打开proj.mac下的项目文件, 在Xcode中打开项目设置页, 点开Targets的设置.
在Build Settings下面找到<code>Search Paths</code>, 将<code>Always Search User Paths</code>设置为<code>Yes</code>.<br>
给<code>Header Search Paths</code> 依次添加下面路径:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">/usr/local/include_code
</span></span><span class="line"><span class="cl">&#34;$(SRCROOT)/../lib/socket.io-clientpp/src&#34;
</span></span><span class="line"><span class="cl">&#34;$(SRCROOT)/../lib/websocketpp/src&#34;
</span></span><span class="line"><span class="cl">&#34;$(SRCROOT)/../lib/rapidjson/include&#34;
</span></span></code></pre></td></tr></table>
</div>
</div><p>如下图所示:
{%img /upload/2013-01/chat-of-pomelo-cocos2d-x-001.png %}</p>
<p>给<code>Library Search Paths</code>添加路径<code>/usr/local/lib</code>. 如下图:
{%img /upload/2013-01/chat-of-pomelo-cocos2d-x-002.png %}</p>
<p>其中<code>/usr/local/include</code>和<code>/usr/local/lib</code>是boost的所在位置(HomeBrew的默认安装位置).
如果你的boost不在上述位置, 请自行更改.</p>
<p>接下来将<code>websocketpp</code>的工程文件添加进来.参见下图:   <br>
{%img /upload/2013-01/chat-of-pomelo-cocos2d-x-003.png %}</p>
<p>然后打开工程的设置, 在Targets的Build Phases页面,找到<code>Link Binary With Libraries</code>,
添加<code>libwebsocketpp.a</code>, 以及boost的库文件(在/usr/local/lib中找到).</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">libboost_date_time-mt.a
</span></span><span class="line"><span class="cl">libboost_graph-mt.a
</span></span><span class="line"><span class="cl">libboost_random-mt.a
</span></span><span class="line"><span class="cl">libboost_regex-mt.a
</span></span><span class="line"><span class="cl">libboost_system-mt.a
</span></span><span class="line"><span class="cl">libboost_thread-mt.a
</span></span><span class="line"><span class="cl">libboost_timer-mt.a
</span></span></code></pre></td></tr></table>
</div>
</div><p>添加的方法参见下图: <br>
{%img /upload/2013-01/chat-of-pomelo-cocos2d-x-004.png %}</p>
<p>##文件Hack
我们在<code>HelloWorldScene.cpp</code>中添加一句<code>#include &lt;socket_io_client.hpp&gt;</code>.<br>
然后试图运行项目的话, 会看到几处报错(有可能你看到这篇文章的时候相关库文件已经更新了, 没有报错的话, 直接跳过这段即可.)<br>
报错的是<code>socket_io_client.hpp</code>中的<code>std::function</code>以及<code>std::unique_ptr</code>等.</p>
<p>这是因为这些语句是C++11的新语法. 而如果在Xcode中启用C++11的支持,则Cocos2d-x无法通过编译.
原因有人说是Cocos2d-x不支持C++11, 有人说是OS X自带的libc++库太旧的原因, Xcode4.6中会更新该库.
我是小菜鸟一只, 也分不清谁说的对.</p>
<p>但我们可以通过修改这些代码, 采用boost的API来完成相应的工作.
而websocketpp这个项目又大量采用了boost, 所以修改为boost的API还是挺划算的.</p>
<p>找到<code>socket_io_client.hpp</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="c1">//typedef std::function&lt;void (socketio_events&amp;, const Value&amp;)&gt; eventFunc;
</span></span></span><span class="line"><span class="cl"><span class="c1">//修改为
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">typedef</span> <span class="n">boost</span><span class="o">::</span><span class="n">function</span><span class="o">&lt;</span><span class="kt">void</span> <span class="p">(</span><span class="n">socketio_events</span><span class="o">&amp;</span><span class="p">,</span> <span class="k">const</span> <span class="n">Value</span><span class="o">&amp;</span><span class="p">)</span><span class="o">&gt;</span> <span class="n">eventFunc</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//std::unique_ptr&lt;boost::asio::deadline_timer&gt; m_heartbeatTimer;
</span></span></span><span class="line"><span class="cl"><span class="c1">//修改为
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">boost</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">boost</span><span class="o">::</span><span class="n">asio</span><span class="o">::</span><span class="n">deadline_timer</span><span class="o">&gt;</span> <span class="n">m_heartbeatTimer</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>找到<code>socket_io_client.cpp</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="c1">//m_heartbeatTimer = std::unique_ptr&lt;boost::asio::deadline_timer&gt;(new boost::asio::deadline_timer(con-&gt;get_io_service(), boost::posix_time::seconds(0)));
</span></span></span><span class="line"><span class="cl"><span class="c1">//修改为
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">m_heartbeatTimer</span> <span class="o">=</span> <span class="n">boost</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">boost</span><span class="o">::</span><span class="n">asio</span><span class="o">::</span><span class="n">deadline_timer</span><span class="o">&gt;</span><span class="p">(</span><span class="k">new</span> <span class="n">boost</span><span class="o">::</span><span class="n">asio</span><span class="o">::</span><span class="n">deadline_timer</span><span class="p">(</span><span class="n">con</span><span class="o">-&gt;</span><span class="n">get_io_service</span><span class="p">(),</span> <span class="n">boost</span><span class="o">::</span><span class="n">posix_time</span><span class="o">::</span><span class="n">seconds</span><span class="p">(</span><span class="mi">0</span><span class="p">)));</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>打开<code>lib/rapidjson/include/rapidjson/document.h</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="c1">//if (reader.Parse&lt;parseFlags&gt;(is, *this)) {
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="err">修改为</span>
</span></span><span class="line"><span class="cl"><span class="nf">if</span> <span class="p">(</span><span class="n">reader</span><span class="p">.</span><span class="k">template</span> <span class="n">Parse</span><span class="o">&lt;</span><span class="n">parseFlags</span><span class="o">&gt;</span><span class="p">(</span><span class="n">is</span><span class="p">,</span> <span class="o">*</span><span class="k">this</span><span class="p">))</span> <span class="p">{</span><span class="s">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="c1">//这个是jsoncpp的一个bug, 新版本里面已经修复, 但socket_io_client绑定了旧版本, 暂未升级. 
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>这是整个项目应该就可以正常编译运行了. 如果没能正常运行, 你可能在某一步出错了,
可以在下面评论分享下你的问题, 如果已经找到解决办法, 也要把解决方法也贴出来, 分享给大家哦, 亲!</p>
<p>//将socket_io_client, websocketpp的cpp文件引入到项目.</p>
    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">文章作者</span>
    <span class="item-content"></span>
  </p>
  <p class="copyright-item">
    <span class="item-title">上次更新</span>
    <span class="item-content">
        2013-01-08
        
    </span>
  </p>
  
  
</div>
<footer class="post-footer">
      
      <nav class="post-nav">
        <a class="prev" href="/post/2013-02-23-setting-up-android-development-envirment-on-mac-os-x/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">搭建Mac OS X下cocos2d-x的Android开发环境</span>
            <span class="prev-text nav-mobile">上一篇</span>
          </a>
        <a class="next" href="/post/2013-01-03-cocos2d-x-source-code-research-4-ccautoreleasepool/">
            <span class="next-text nav-default">2d-x深读4:CCAutoReleasePool</span>
            <span class="next-text nav-mobile">下一篇</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="https://github.com/young40" class="iconfont icon-github" title="github"></a>
      <a href="https://weibo.com/n/%e6%9d%a8%e4%b8%96%e7%8e%b2" class="iconfont icon-weibo" title="weibo"></a>
      <a href="https://www.zhihu.com/people/young40" class="iconfont icon-zhihu" title="zhihu"></a>
  
</div>

<div class="copyright">
  <span class="power-by">
    由 <a class="hexo-link" href="https://gohugo.io">Hugo</a> 强力驱动
  </span>

  <span class="division">|</span>

  <span class="theme-info">
      Network by
      <a class="theme-link" href="https://www.netlify.com">Netlify</a>
  </span>

  <span class="division">|</span>
  <span class="theme-info">
    主题 - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2012 - 
    2025<span class="heart"><i class="iconfont icon-heart"></i></span><span>杨世玲</span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.4ae89da218555efa0e7093a20b92017d2e1202b66fff9fc2edf4cb8d44b44c6e.js"></script>





  

</body>
</html>
